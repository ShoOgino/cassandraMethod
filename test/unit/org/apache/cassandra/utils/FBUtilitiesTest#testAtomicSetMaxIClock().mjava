    @Test
    public void testAtomicSetMaxIClock()
    {
        AtomicReference<IClock> atomicClock = new AtomicReference<IClock>(null);
        
        // atomic < new
        atomicClock.set(TimestampClock.MIN_VALUE);
        FBUtilities.atomicSetMax(atomicClock, new TimestampClock(1L));
        assert ((TimestampClock)atomicClock.get()).timestamp() == 1L;
        
        // atomic == new
        atomicClock.set(new TimestampClock(3L));
        FBUtilities.atomicSetMax(atomicClock, new TimestampClock(3L));
        assert ((TimestampClock)atomicClock.get()).timestamp() == 3L;

        // atomic > new
        atomicClock.set(new TimestampClock(9L));
        FBUtilities.atomicSetMax(atomicClock, new TimestampClock(3L));
        assert ((TimestampClock)atomicClock.get()).timestamp() == 9L;
    } 

