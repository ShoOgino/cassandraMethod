    public ByteBuffer readValue(DataInput in) throws IOException
    {
        int length = valueLengthIfFixed();
        if (length >= 0)
            return ByteBufferUtil.read(in, length);
        else
            return ByteBufferUtil.readWithLength(in);
    }

