    @Override
    public void close()
    {
        List<Future<?>> futures = instances.stream()
                .map(i -> exec.submit(i::shutdown))
                .collect(Collectors.toList());

//        withThreadLeakCheck(futures);

        // Make sure to only delete directory when threads are stopped
        exec.submit(() -> {
            FBUtilities.waitOnFutures(futures);
            FileUtils.deleteRecursive(root);
        });
    }

