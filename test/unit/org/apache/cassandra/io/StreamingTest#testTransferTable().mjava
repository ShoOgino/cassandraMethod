    @Test
    public void testTransferTable() throws Exception
    {
        StorageService.instance.initServer();
        DecoratedKey emptyKey = StorageService.getPartitioner().decorateKey("");

        // write a temporary SSTable, but don't register it
        Set<String> content = new HashSet<String>();
        content.add("key");
        SSTableReader sstable = SSTableUtils.writeSSTable(content);
        String tablename = sstable.getTableName();
        String cfname = sstable.getColumnFamilyName();

        // transfer
        StreamOut.transferSSTables(LOCAL, Arrays.asList(sstable), tablename);

        // confirm that the SSTable was transferred and registered
        ColumnFamilyStore cfstore = Table.open(tablename).getColumnFamilyStore(cfname);
        RangeReply rr = cfstore.getKeyRange(emptyKey, emptyKey, 2);
        assert rr.keys.size() == 1;
        assert rr.keys.contains("key");
    }

