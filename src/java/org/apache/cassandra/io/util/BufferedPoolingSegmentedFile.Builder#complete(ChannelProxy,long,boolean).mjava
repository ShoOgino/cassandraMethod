        public SegmentedFile complete(ChannelProxy channel, long overrideLength, boolean isFinal)
        {
            assert !isFinal || overrideLength <= 0;
            long length = overrideLength > 0 ? overrideLength : channel.size();
            return new BufferedPoolingSegmentedFile(channel, length);
        }

