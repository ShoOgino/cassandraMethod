    public TraceState begin(final String request, final Map<String, String> parameters)
    {
        assert isTracing();

        final TraceState state = this.state.get();
        final long startedAt = System.currentTimeMillis();
        final ByteBuffer sessionId = state.sessionIdBytes;
        final String command = state.traceType.toString();
        final int ttl = state.ttl;

        StageManager.getStage(Stage.TRACING).execute(new Runnable()
        {
            public void run()
            {
                mutateWithCatch(TraceKeyspace.toStartSessionMutation(sessionId, parameters, request, startedAt, command, ttl));
            }
        });

        return state;
    }

