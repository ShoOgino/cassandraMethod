    private void setMetadata(IndexMetadata indexDef)
    {
        metadata = indexDef;
        functions = getFunctions(baseCfs.metadata, indexDef);
        CFMetaData cfm = indexCfsMetadata(baseCfs.metadata, indexDef);
        indexCfs = ColumnFamilyStore.createColumnFamilyStore(baseCfs.keyspace,
                                                             cfm.cfName,
                                                             cfm,
                                                             baseCfs.getTracker().loadsstables);
        assert indexDef.columns.size() == 1 : "Build in indexes on multiple target columns are not supported";
        indexedColumn = indexDef.indexedColumn(baseCfs.metadata);
    }

