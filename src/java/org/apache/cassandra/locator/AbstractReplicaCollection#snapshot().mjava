    public C snapshot()
    {
        return isSnapshot ? self()
                          : snapshot(list.isEmpty() ? EMPTY_LIST
                                                    : new ArrayList<>(list));
    }

