        protected void runMayThrow() throws Exception
        {
            boolean completed = false;
            try
            {
                logger.debug("Setting repairedAt to {} on {} for {}", repairedAt, transaction.originals(), sessionID);
                cfs.getCompactionStrategyManager().mutateRepaired(transaction.originals(), repairedAt, ActiveRepairService.NO_PENDING_REPAIR);
                completed = true;
            }
            finally
            {
                // we always abort because mutating metadata isn't guarded by LifecycleTransaction, so this won't roll
                // anything back. Also, we don't want to obsolete the originals. We're only using it to prevent other
                // compactions from marking these sstables compacting, and unmarking them when we're done
                transaction.abort();
                if (completed)
                {
                    removeSession(sessionID);
                }
            }
        }

