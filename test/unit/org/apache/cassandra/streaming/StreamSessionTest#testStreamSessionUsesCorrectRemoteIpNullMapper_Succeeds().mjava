    @Test
    public void testStreamSessionUsesCorrectRemoteIpNullMapper_Succeeds() throws UnknownHostException
    {
        InetAddressAndPort localAddr = InetAddressAndPort.getByName("127.0.0.1:7000");

        StreamSession streamSession = new StreamSession(StreamOperation.BOOTSTRAP, localAddr,
                          new DefaultConnectionFactory(), 0, UUID.randomUUID(), PreviewKind.ALL, (peer) -> null);

        assertEquals(localAddr, streamSession.getMessageSender().getConnectionId().connectionAddress());
    }

