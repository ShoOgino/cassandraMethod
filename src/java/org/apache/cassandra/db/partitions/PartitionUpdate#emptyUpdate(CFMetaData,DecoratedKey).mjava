    /**
     * Creates a empty immutable partition update.
     *
     * @param metadata the metadata for the created update.
     * @param key the partition key for the created update.
     *
     * @return the newly created empty (and immutable) update.
     */
    public static PartitionUpdate emptyUpdate(CFMetaData metadata, DecoratedKey key)
    {
        return new PartitionUpdate(metadata, key, PartitionColumns.NONE, 0)
        {
            public Row.Writer staticWriter()
            {
                throw new UnsupportedOperationException();
            }

            public Row.Writer writer()
            {
                throw new UnsupportedOperationException();
            }

            public void addPartitionDeletion(DeletionTime deletionTime)
            {
                throw new UnsupportedOperationException();
            }

            public void addRangeTombstone(RangeTombstone range)
            {
                throw new UnsupportedOperationException();
            }
        };
    }

