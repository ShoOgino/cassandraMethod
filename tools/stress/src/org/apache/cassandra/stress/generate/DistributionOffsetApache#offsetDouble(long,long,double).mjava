    private double offsetDouble(long min, long delta, double r)
    {
        if (r < 0)
            r = 0;
        if (r > delta)
            r = delta;
        return min + r;
    }

