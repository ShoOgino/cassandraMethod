    /**
     * This method computes the {@link #localExpirationTime}, maybe capping to the maximum representable value
     * which is {@link #MAX_DELETION_TIME}.
     *
     * Please note that the {@link org.apache.cassandra.cql3.Attributes.ExpirationDateOverflowPolicy} is applied
     * during {@link org.apache.cassandra.cql3.Attributes#maybeApplyExpirationDateOverflowPolicy(CFMetaData, int, boolean)},
     * so if the request was not denied it means it's expiration date should be capped.
     *
     * See CASSANDRA-14092
     */
    private int computeLocalExpirationTime(int timeToLive)
    {
        int localExpirationTime =  (int) (System.currentTimeMillis() / 1000) + timeToLive;
        return localExpirationTime >= 0? localExpirationTime : MAX_DELETION_TIME;
    }

