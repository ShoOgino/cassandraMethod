    /**
     * Checks MS for the version, provided MS _really_ knows it (has directly communicated with the node) otherwise falls back to checking the gossipped version (learned about this node indirectly)
     * If both fail, the node is too old to use hostid-style status serialization
     * @param endpoint
     * @return boolean whether or not to use hostid
     */
    private boolean usesHostId(InetAddress endpoint)
    {
        if (MessagingService.instance().knowsVersion(endpoint) && MessagingService.instance().getVersion(endpoint) >= MessagingService.VERSION_12)
            return true;
        else if (Gossiper.instance.getEndpointStateForEndpoint(endpoint) != null) // simply to pass the bootstrap test
        {
            if (Gossiper.instance.getEndpointStateForEndpoint(endpoint).getApplicationState(ApplicationState.NET_VERSION) != null && Integer.valueOf(Gossiper.instance.getEndpointStateForEndpoint(endpoint).getApplicationState(ApplicationState.NET_VERSION).value) >= MessagingService.VERSION_12)
                return true;
        }
        return false;
    }

