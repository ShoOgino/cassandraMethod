    @Test
    public void testColumnDelete()
    {
        // issue a column delete and test that the configured index instance was notified to update
        CFMetaData cfm = Schema.instance.getCFMetaData(KEYSPACE1, CF_INDEXED);

        new RowUpdateBuilder(cfm, FBUtilities.timestampMicros(), "k2")
            .noRowMarker()
            .delete("indexed")
            .build()
            .apply();

        UnfilteredRowIterator indexedRow = PerRowSecondaryIndexTest.TestIndex.LAST_INDEXED_PARTITION;
        assertNotNull(indexedRow);

        //We filter tombstones now...
        Assert.assertFalse(UnfilteredRowIterators.filter(indexedRow, FBUtilities.nowInSeconds()).hasNext());
        assertTrue(Arrays.equals("k2".getBytes(), PerRowSecondaryIndexTest.TestIndex.LAST_INDEXED_KEY.array()));
    }

