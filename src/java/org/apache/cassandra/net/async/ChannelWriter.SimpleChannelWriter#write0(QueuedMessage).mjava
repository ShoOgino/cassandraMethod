        protected ChannelFuture write0(QueuedMessage message)
        {
            pendingMessageCount.incrementAndGet();
            // We don't truly want to flush on every message but we do want to wake-up the netty event loop for the
            // channel so the message is processed right away, which is why we use writeAndFlush. This won't actually
            // flush, though, because onTriggeredFlush, which MessageOutHandler delegates to, does nothing. We will
            // flush after the message is processed though if there is no pending one due to onMessageProcessed.
            // See the class javadoc for context and much more details.
            return channel.writeAndFlush(message);
        }

