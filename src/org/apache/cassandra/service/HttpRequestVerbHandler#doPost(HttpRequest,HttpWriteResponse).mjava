    /*
     * As a result of the POST query, we currently only send back some
     * javascript that updates the data in some place on the browser.
    */
    private void doPost(HttpRequest httpRequest, HttpWriteResponse httpResponse)
    {
        String query = httpRequest.getQuery();

        HTMLFormatter formatter = new HTMLFormatter();
        formatter.startBody(true, getJSFunctions(), true, true);
        formatter.appendLine("<h1><font color=\"white\"> Cluster map </font></h1>");

        // write a shell for adding some javascript to do in-place updates
        StringBuilder sbResult = new StringBuilder();
        do
        {
            if(query.indexOf(QUERY) != -1)
            {
                sbResult.append(handleQuery(httpRequest));
                break;
            }
            else if(query.indexOf(INSERT) != -1)
            {
                sbResult.append(handleInsert(httpRequest));
                break;
            }
            else if(query.indexOf(SCRIPT) != -1)
            {
                sbResult.append(handleScript(httpRequest));
                break;
            }
        }
        while(false);

        if(sbResult.toString() != null)
        {
            formatter.appendLine(sbResult.toString());
        }

        formatter.endBody();

    	httpResponse.println(formatter.toString());
    }

