    private void watchIO()
    {
        OutputStream in = process.getOutputStream();
        InputStream err = process.getErrorStream();
        InputStream out = process.getInputStream();
        while (true)
        {
            boolean errHandled;
            boolean outHandled;
            try
            {
                if (stdin != null)
                {
                    IOUtils.copy(stdin, in);
                    if (stdinAutoClose)
                    {
                        in.close();
                        stdin = null;
                    }
                }
                errHandled = IOUtils.copy(err, errBuffer) > 0;
                outHandled = IOUtils.copy(out, outBuffer) > 0;
            }
            catch(IOException e1)
            {
                logger.error("Error trying to use in/err/out from process");
                Thread.currentThread().interrupt();
                break;
            }
            if (!errHandled && !outHandled)
            {
                if (!process.isAlive())
                    return;
                try
                {
                    Thread.sleep(50L);
                }
                catch (InterruptedException e)
                {
                    Thread.currentThread().interrupt();
                    break;
                }
            }
        }
    }

