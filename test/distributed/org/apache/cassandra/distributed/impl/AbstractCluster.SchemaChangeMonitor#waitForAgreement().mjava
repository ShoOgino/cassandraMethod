        public void waitForAgreement()
        {
            schemaHasChanged = true;
            signal();
            try
            {
                if (!agreement.await(1L, TimeUnit.MINUTES))
                    throw new InterruptedException();
            }
            catch (InterruptedException e)
            {
                throw new IllegalStateException("Schema agreement not reached");
            }
        }

