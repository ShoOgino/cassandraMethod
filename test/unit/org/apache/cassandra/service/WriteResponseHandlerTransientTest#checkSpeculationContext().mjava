    @Ignore("Throws unavailable for quorum as written")
    @Test
    public void checkSpeculationContext()
    {
        EndpointsForToken all = replicas(full(EP1), full(EP2), trans(EP3));
        // in happy path, transient replica should be classified as a backup
        assertSpeculationReplicas(expected(all,
                                           replicas(full(EP1), full(EP2))),
                                  replicas(full(EP1), full(EP2), trans(EP3)),
                                  2, dead());

        // if one of the full replicas is dead, they should all be in the initial contacts
        assertSpeculationReplicas(expected(all,
                                           replicas(full(EP1), trans(EP3))),
                                  replicas(full(EP1), full(EP2), trans(EP3)),
                                  2, dead(EP2));

        // block only for 1 full replica, use transient as backups
        assertSpeculationReplicas(expected(all,
                                           replicas(full(EP1))),
                                  replicas(full(EP1), full(EP2), trans(EP3)),
                                  1, dead(EP2));
    }

