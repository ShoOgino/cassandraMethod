    @Test
    public void testAllShadowedSelect()
    {
        // insert exactly the amount of tombstones that *SHOULD* normally trigger an exception
        for (int i = 0; i < THRESHOLD + 1; i++)
            execute("INSERT INTO %s.%s (a, b, c) VALUES ('key3', 'column" + i + "', null);");

        // delete all with a partition level tombstone
        execute("DELETE FROM %s.%s WHERE a = 'key3'");

        try
        {
            execute("SELECT * FROM %s.%s WHERE a = 'key3';");
        }
        catch (Throwable e)
        {
            fail("SELECT with tombstones shadowed by a partition tombstone should not have failed, but has: " + e);
        }
    }

