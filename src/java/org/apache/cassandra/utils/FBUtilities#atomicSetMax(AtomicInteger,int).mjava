    public static void atomicSetMax(AtomicInteger atomic, int i)
    {
        int j;
        while (true)
        {
            if ((j = atomic.getAndSet(i)) <= i)
                break;
            i = j;
        }
    }

