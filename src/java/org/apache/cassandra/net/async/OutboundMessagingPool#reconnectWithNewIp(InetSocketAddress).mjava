    /**
     * Reconnect to the peer using the given {@code addr}. Outstanding messages in each channel will be sent on the
     * current channel. Typically this function is used for something like EC2 public IP addresses which need to be used
     * for communication between EC2 regions.
     *
     * @param addr IP Address to use (and prefer) going forward for connecting to the peer
     */
    public void reconnectWithNewIp(InetSocketAddress addr)
    {
        preferredRemoteAddr = addr;
        gossipChannel.reconnectWithNewIp(addr);
        largeMessageChannel.reconnectWithNewIp(addr);
        smallMessageChannel.reconnectWithNewIp(addr);
    }

