    public static Config loadConfig(InstanceConfig overrides)
    {
        Config config = new Config();
        // Defaults
        config.commitlog_sync = Config.CommitLogSync.batch;
        config.endpoint_snitch = SimpleSnitch.class.getName();
        config.seed_provider = new ParameterizedClass(SimpleSeedProvider.class.getName(),
                                                      Collections.singletonMap("seeds", "127.0.0.1:7010"));
        // Overrides
        config.partitioner = overrides.partitioner;
        config.broadcast_address = overrides.broadcast_address;
        config.listen_address = overrides.listen_address;
        config.broadcast_rpc_address = overrides.broadcast_rpc_address;
        config.rpc_address = overrides.rpc_address;
        config.saved_caches_directory = overrides.saved_caches_directory;
        config.data_file_directories = overrides.data_file_directories;
        config.commitlog_directory = overrides.commitlog_directory;
        config.hints_directory = overrides.hints_directory;
        config.concurrent_writes = overrides.concurrent_writes;
        config.concurrent_counter_writes = overrides.concurrent_counter_writes;
        config.concurrent_materialized_view_writes = overrides.concurrent_materialized_view_writes;
        config.concurrent_reads = overrides.concurrent_reads;
        config.memtable_flush_writers = overrides.memtable_flush_writers;
        config.concurrent_compactors = overrides.concurrent_compactors;
        config.memtable_heap_space_in_mb = overrides.memtable_heap_space_in_mb;
        config.initial_token = overrides.initial_token;

        // legacy config options we need to specify
        config.commitlog_sync_batch_window_in_ms = 1.0;
        return config;
    }

