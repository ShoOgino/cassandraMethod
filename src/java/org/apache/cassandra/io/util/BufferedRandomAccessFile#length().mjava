    public long length() throws IOException
    {
        return (fileLength == -1) ? Math.max(current, channel.size()) : fileLength;
    }

