        @Override
        public boolean allowOutgoingMessage(MessageOut messageOut, int id, InetAddressAndPort to)
        {
            try (DataOutputBuffer out = new DataOutputBuffer(1024))
            {
                InetAddressAndPort from = broadcastAddressAndPort();
                int version = MessagingService.instance().getVersion(to);
                messageOut.serialize(out, version);
                deliver.accept(to, new Message(messageOut.verb.getId(), out.toByteArray(), id, version, from));
            }
            catch (IOException e)
            {
                throw new RuntimeException(e);
            }
            return false;
        }

