            /**
             * Submit differencers for running.
             * All tree *must* have been received before this is called.
             */
            public void submitDifferencers()
            {
                assert requestedEndpoints.size() == 0;

                // Right now, we only difference local host against each other. CASSANDRA-2610 will fix that.
                // In the meantime ugly special casing will work good enough.
                MerkleTree localTree = trees.get(FBUtilities.getLocalAddress());
                assert localTree != null;
                for (Map.Entry<InetAddress, MerkleTree> entry : trees.entrySet())
                {
                    if (entry.getKey().equals(FBUtilities.getLocalAddress()))
                        continue;

                    Differencer differencer = new Differencer(cfname, entry.getKey(), entry.getValue(), localTree);
                    syncJobs.add(entry.getKey());
                    logger.debug("Queueing comparison " + differencer);
                    StageManager.getStage(Stage.ANTI_ENTROPY).execute(differencer);
                }
                trees.clear(); // allows gc to do its thing
            }

