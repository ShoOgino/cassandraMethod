    public void testRestrictTo() throws Exception
    {
        IPartitioner p = new OrderPreservingPartitioner();
        Token min = p.getMinimumToken();
        Range wraps = new Range(new StringToken("m"), new StringToken("e"));
        Range normal = new Range(wraps.right, wraps.left);
        Bounds all = new Bounds(min, min, p);
        Bounds almostAll = new Bounds(new StringToken("a"), min, p);

        Set<AbstractBounds> S;
        Set<AbstractBounds> S2;

        S = all.restrictTo(wraps);
        assert S.equals(new HashSet<AbstractBounds>(Arrays.asList(wraps)));

        S = almostAll.restrictTo(wraps);
        S2 = new HashSet<AbstractBounds>(Arrays.asList(new Bounds(new StringToken("a"), new StringToken("e"), p),
                                                       new Range(new StringToken("m"), min)));
        assert S.equals(S2);

        S = all.restrictTo(normal);
        assert S.equals(new HashSet<AbstractBounds>(Arrays.asList(normal)));
    }

