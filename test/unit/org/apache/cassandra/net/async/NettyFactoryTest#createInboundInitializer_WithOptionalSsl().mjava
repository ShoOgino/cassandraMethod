    @Test
    public void createInboundInitializer_WithOptionalSsl() throws Exception
    {
        ServerEncryptionOptions encryptionOptions = encOptions();
        encryptionOptions.enabled = true;
        encryptionOptions.optional = true;
        InboundInitializer initializer = new InboundInitializer(AUTHENTICATOR, encryptionOptions, channelGroup);
        NioSocketChannel channel = new NioSocketChannel();
        Assert.assertNull(channel.pipeline().get(SslHandler.class));
        initializer.initChannel(channel);
        Assert.assertNotNull(channel.pipeline().get(OptionalSslHandler.class));
        Assert.assertNull(channel.pipeline().get(SslHandler.class));
    }

