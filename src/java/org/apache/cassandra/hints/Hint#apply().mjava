    /**
     * Applies the contained mutation unless it's expired, filtering out any updates for truncated tables
     */
    void apply()
    {
        if (!isLive())
            return;

        // filter out partition update for table that have been truncated since hint's creation
        Mutation filtered = mutation;
        for (UUID id : mutation.getColumnFamilyIds())
            if (creationTime <= SystemKeyspace.getTruncatedAt(id))
                filtered = filtered.without(id);

        if (!filtered.isEmpty())
            filtered.apply();
    }

