    public long length() throws IOException
    {
        if (fileLength == -1)
        {
            // max accounts for the case where we have written past the old file length, but not yet flushed our buffer
            return Math.max(this.curr_, super.length());
        }
        else
        {
            // opened as read only, file length is cached
            return fileLength;
        }
    }

