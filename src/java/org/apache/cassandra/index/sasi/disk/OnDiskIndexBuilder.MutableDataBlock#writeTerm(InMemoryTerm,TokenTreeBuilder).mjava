        private void writeTerm(InMemoryTerm term, TokenTreeBuilder keys) throws IOException
        {
            term.serialize(buffer);
            buffer.writeByte((byte) keys.getTokenCount());

            Iterator<Pair<Long, LongSet>> tokens = keys.iterator();
            while (tokens.hasNext())
                buffer.writeLong(tokens.next().left);
        }

