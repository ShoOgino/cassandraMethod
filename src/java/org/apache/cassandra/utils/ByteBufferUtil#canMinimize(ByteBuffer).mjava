    public static boolean canMinimize(ByteBuffer buf)
    {
        return buf != null && (buf.capacity() > buf.remaining() || !buf.hasArray());
    }

