    private static void ensureCapacity(byte[] b, int off, int len)
    {
        int writable = b.length - off;
        if (writable < len)
        {
            if (writable < 0)
                throw new IndexOutOfBoundsException("Attempted to write to offset " + off + " but array length is " + b.length);
            throw new IndexOutOfBoundsException("Attempted to write " + len + " bytes to array with remaining capacity of " + writable);
        }
    }

