    /**
     * MUST APPLY FIRST
     * See {@link ReplicaLayout#haveWriteConflicts}
     * @return a 'natural' replica collection, that has had its conflicts with pending repaired
     */
    private static <E extends Endpoints<E>> E resolveWriteConflictsInNatural(E natural, E pending)
    {
        return natural.filter(r -> !r.isTransient() || !pending.contains(r.endpoint(), true));
    }

