    private void testDescriptorPersistence(CommitLogDescriptor desc) throws IOException
    {
        ByteBuffer buf = ByteBuffer.allocate(1024);
        CommitLogDescriptor.writeHeader(buf, desc);
        // Put some extra data in the stream.
        buf.putDouble(0.1);
        buf.flip();

        try (DataInputBuffer input = new DataInputBuffer(buf, false))
        {
            CommitLogDescriptor read = CommitLogDescriptor.readHeader(input);
            assertEquals("Descriptors", desc, read);
        }
    }

