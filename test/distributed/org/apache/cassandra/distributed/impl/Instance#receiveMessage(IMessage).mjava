    public void receiveMessage(IMessage imessage)
    {
        sync(() -> {
            // Based on org.apache.cassandra.net.IncomingTcpConnection.receiveMessage
            try
            {
                MessageIn message = deserializeMessage(imessage);
                if (message == null)
                {
                    // callback expired; nothing to do
                    return;
                }
                if (message.version <= MessagingService.current_version)
                {
                    MessagingService.instance().receive(message, imessage.id());
                }
                // else ignore message
            }
            catch (Throwable t)
            {
                throw new RuntimeException("Exception occurred on node " + broadcastAddress(), t);
            }
        }).run();
    }

