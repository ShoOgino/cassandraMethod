    @Test
    public void testRandom() throws IOException {
        Random random = new Random();
        byte[] bytes = new byte[1024*1024];
        random.nextBytes(bytes);

        DataInputBuffer.FastByteArrayInputStream bis = new DataInputBuffer.FastByteArrayInputStream(bytes);
        int read = 0;
        int n = 0;
        while ( true )
        {
            read = bis.read();
            if ( read == -1 )
                break;
            assert read == ((int)bytes[n++]&0xFF);
        }
        assert n == bytes.length;
    }

