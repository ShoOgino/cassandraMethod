    public static TokenRange create(Token.TokenFactory tokenFactory, Range<Token> range, List<InetAddress> endpoints)
    {
        List<EndpointDetails> details = new ArrayList<>(endpoints.size());
        IEndpointSnitch snitch = DatabaseDescriptor.getEndpointSnitch();
        for (InetAddress ep : endpoints)
            details.add(new EndpointDetails(ep,
                                            StorageService.instance.getRpcaddress(ep),
                                            snitch.getDatacenter(ep),
                                            snitch.getRack(ep)));
        return new TokenRange(tokenFactory, range, details);
    }

