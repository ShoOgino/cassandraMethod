    // This is *not* thread safe. As far as the global instance is concerned, only
    // Schema.loadType() (which is only called in DefsTables that is synchronized)
    // should use this.
    public void addType(UserType type)
    {
        UserType old = userTypes.get(type.name);
        assert old == null || type.isCompatibleWith(old);
        userTypes.put(type.name, type);
    }

