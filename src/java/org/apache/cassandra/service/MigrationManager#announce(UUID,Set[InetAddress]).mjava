    /** actively announce my version to a set of hosts via rpc.  They may culminate with them sending me migrations. */
    public static void announce(final UUID version, Set<InetAddress> hosts)
    {
        MessageProducer prod = new CachingMessageProducer(new MessageProducer() {
            public Message getMessage(Integer protocolVersion) throws IOException
            {
                return makeVersionMessage(version, protocolVersion);
            }
        });
        for (InetAddress host : hosts)
        {
            try 
            {
                MessagingService.instance().sendOneWay(prod.getMessage(Gossiper.instance.getVersion(host)), host);
            }
            catch (IOException ex)
            {
                // happened during message serialization.
                throw new IOError(ex);
            }
        }
        passiveAnnounce(version);
    }

