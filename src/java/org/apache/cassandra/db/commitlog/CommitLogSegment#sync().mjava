    /**
     * Forces a disk flush for this segment file.
     */
    public synchronized void sync()
    {
        if (needsSync)
        {
            try
            {
                buffer.force();
            }
            catch (Exception e) // MappedByteBuffer.force() does not declare IOException but can actually throw it
            {
                throw new FSWriteError(e, getPath());
            }
            needsSync = false;
        }
    }

