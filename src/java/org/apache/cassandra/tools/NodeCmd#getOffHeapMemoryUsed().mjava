    /**
     * Returns the total off heap memory used in MB.
     * @return the total off heap memory used in MB.
     */
    private double getOffHeapMemoryUsed()
    {
        long offHeapMemUsedInBytes = 0;
        // get a list of column family stores
        Iterator<Map.Entry<String, ColumnFamilyStoreMBean>> cfamilies = probe.getColumnFamilyStoreMBeanProxies();

        while (cfamilies.hasNext())
        {
            Entry<String, ColumnFamilyStoreMBean> entry = cfamilies.next();
            ColumnFamilyStoreMBean cfsProxy = entry.getValue();
            offHeapMemUsedInBytes += cfsProxy.getBloomFilterOffHeapMemoryUsed();
            offHeapMemUsedInBytes += cfsProxy.getIndexSummaryOffHeapMemoryUsed();
            offHeapMemUsedInBytes += cfsProxy.getCompressionMetadataOffHeapMemoryUsed();
        }

        return offHeapMemUsedInBytes / (1024d * 1024);
    }

