    @Test
    public void testEvolveSystemKeyspaceChanged()
    {
        CFMetaData table0 = CFMetaData.compile("CREATE TABLE t (id int PRIMARY KEY)", "ks2");
        KeyspaceMetadata keyspace0 = KeyspaceMetadata.create("ks2", KeyspaceParams.simple(1), Tables.of(table0));

        // create the keyspace, verify it's there
        MigrationManager.announce(SchemaKeyspace.makeCreateKeyspaceMutation(keyspace0, 0), true);
        assertEquals(keyspace0, Schema.instance.getKSMetaData("ks2"));

        CFMetaData table1 = table0.copy().comment("comment");
        KeyspaceMetadata keyspace1 = KeyspaceMetadata.create("ks2", KeyspaceParams.simple(1), Tables.of(table1));

        Optional<Mutation> mutation = MigrationManager.evolveSystemKeyspace(keyspace1, 1);
        assertTrue(mutation.isPresent());

        MigrationManager.announce(mutation.get(), true);
        assertEquals(keyspace1, Schema.instance.getKSMetaData("ks2"));
    }

