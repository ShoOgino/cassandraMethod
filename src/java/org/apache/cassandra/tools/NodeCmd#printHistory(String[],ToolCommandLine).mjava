    private static void printHistory(String[] args, ToolCommandLine cmd)
    {
        //don't bother to print if no args passed (meaning, nodetool is just printing out the sub-commands list)
        if (args.length == 0)
            return;
        String cmdLine = Joiner.on(" ").skipNulls().join(args);
        final String password = cmd.getOptionValue(PASSWORD_OPT.left);
        if (password != null)
            cmdLine = cmdLine.replace(password, "<hidden>");

        FileWriter writer = null;
        try
        {
            final String outputDir = FBUtilities.getToolsOutputDirectory().getCanonicalPath();
            writer = new FileWriter(new File(outputDir, HISTORYFILE), true);
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss,SSS");
            writer.append(sdf.format(new Date()) + ": " + cmdLine + "\n");
        }
        catch (IOException ioe)
        {
            //quietly ignore any errors about not being able to write out history
        }
        finally
        {
            FileUtils.closeQuietly(writer);
        }
    }

