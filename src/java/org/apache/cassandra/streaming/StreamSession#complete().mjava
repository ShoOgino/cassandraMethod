    /**
     * Check if session is completed on receiving {@code StreamMessage.Type.COMPLETE} message.
     */
    public synchronized void complete()
    {
        if (state == State.WAIT_COMPLETE)
        {
            state(State.COMPLETE);
            handler.close();
            streamResult.handleSessionComplete(this);
        }
        else
        {
            state(State.WAIT_COMPLETE);
        }
    }

