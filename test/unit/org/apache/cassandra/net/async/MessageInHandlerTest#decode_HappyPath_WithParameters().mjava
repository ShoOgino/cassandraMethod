    @Test
    public void decode_HappyPath_WithParameters() throws Exception
    {
        UUID uuid = UUIDGen.getTimeUUID();
        Map<ParameterType, Object> parameters = new HashMap<>();
        parameters.put(ParameterType.FAILURE_REASON, (short)42);
        parameters.put(ParameterType.TRACE_SESSION, uuid);
        MessageInWrapper result = decode_HappyPath(parameters);
        Assert.assertEquals(2, result.messageIn.parameters.size());
        Assert.assertEquals((short)42, result.messageIn.parameters.get(ParameterType.FAILURE_REASON));
        Assert.assertEquals(uuid, result.messageIn.parameters.get(ParameterType.TRACE_SESSION));
    }

