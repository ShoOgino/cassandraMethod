    @Test
    public void thirdMessageTest() throws Exception
    {
        ThirdHandshakeMessage before = new ThirdHandshakeMessage(MessagingService.current_version, FBUtilities.getBroadcastAddress());
        buf = before.encode(PooledByteBufAllocator.DEFAULT);
        ThirdHandshakeMessage after = ThirdHandshakeMessage.maybeDecode(buf);
        assertEquals(before, after);
        assertEquals(before.hashCode(), after.hashCode());
        Assert.assertFalse(before.equals(null));
    }

