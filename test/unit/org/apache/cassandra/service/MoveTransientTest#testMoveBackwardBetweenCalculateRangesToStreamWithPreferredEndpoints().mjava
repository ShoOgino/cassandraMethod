    @Test
    public void testMoveBackwardBetweenCalculateRangesToStreamWithPreferredEndpoints() throws Exception
    {
        RangesByEndpoint.Mutable expectedResult = new RangesByEndpoint.Mutable();

        expectedResult.put(bAddress, fullReplica(bAddress, fourteenToken, oneToken));

        expectedResult.put(dAddress, transientReplica(dAddress, oneToken, threeToken));

        expectedResult.put(cAddress, fullReplica(cAddress, oneToken, threeToken));
        expectedResult.put(cAddress, transientReplica(cAddress, fourteenToken, oneToken));

        invokeCalculateRangesToStreamWithPreferredEndpoints(calculateStreamAndFetchRangesMoveBackwardBetween().left,
                                                            constructTMDsMoveBackwardBetween(),
                                                            expectedResult.asImmutableView());
    }

