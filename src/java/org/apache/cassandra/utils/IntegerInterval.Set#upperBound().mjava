        /**
         * Returns an upper bound for the whole set. Will throw if set is not empty.
         */
        public int upperBound()
        {
            long[] ranges = this.ranges; // take local copy to avoid risk of it changing in the midst of operation
            return upper(ranges[ranges.length - 1]);
        }

