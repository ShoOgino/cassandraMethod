    /*
     * Ensure the buffer contains the minimum number of readable bytes, throws EOF if enough bytes aren't available
     * Add padding if requested and return the limit of the buffer without any padding that is added.
     */
    private int prepareReadPaddedPrimitive(int minimum) throws IOException
    {
        int limitToSet = buf.limit();
        int position = buf.position();
        if (limitToSet - position < minimum)
        {
            readMinimum(minimum, 1);
            limitToSet = buf.limit();
            position = buf.position();
            if (limitToSet - position < minimum)
                buf.limit(position + minimum);
        }
        return limitToSet;
    }

