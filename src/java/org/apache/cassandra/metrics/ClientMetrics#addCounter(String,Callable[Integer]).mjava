    public void addCounter(String name, final Callable<Integer> provider)
    {
        Metrics.newGauge(factory.createMetricName(name), new Gauge<Integer>()
        {
            public Integer value()
            {
                try
                {
                    return provider.call();
                }
                catch (Exception e)
                {
                    throw new RuntimeException(e);
                }
            }
        });
    }

