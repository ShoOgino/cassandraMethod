    public static void writeValue(ByteBuffer bytes, ByteBuf cb)
    {
        if (bytes == null)
        {
            cb.writeInt(-1);
            return;
        }

        int remaining = bytes.remaining();
        cb.writeInt(remaining);

        if (remaining > 0)
        {
            // write and reset original position so we not need to create a duplicate.
            int position = bytes.position();
            cb.writeBytes(bytes);
            bytes.position(position);
        }
    }

