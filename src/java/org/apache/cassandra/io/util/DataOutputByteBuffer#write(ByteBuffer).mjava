    public void write(ByteBuffer buffer) throws IOException
    {
        int len = buffer.remaining();
        ByteBufferUtil.arrayCopy(buffer, buffer.position(), this.buffer, this.buffer.position(), len);
        this.buffer.position(this.buffer.position() + len);
    }

