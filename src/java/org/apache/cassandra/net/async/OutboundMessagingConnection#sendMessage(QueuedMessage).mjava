    boolean sendMessage(QueuedMessage queuedMessage)
    {
        State state = this.state.get();
        if (state == State.READY)
        {
            if (channelWriter.write(queuedMessage, false))
                return true;

            backlog.add(queuedMessage);
            return false;
        }
        else if (state == State.CLOSED)
        {
            errorLogger.warn("trying to write message to a closed connection");
            return false;
        }
        else
        {
            backlog.add(queuedMessage);
            connect();
            return true;
        }
    }

