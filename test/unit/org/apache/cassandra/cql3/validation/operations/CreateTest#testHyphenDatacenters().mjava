    @Test
    // tests CASSANDRA-4278
    public void testHyphenDatacenters() throws Throwable
    {
        IEndpointSnitch snitch = DatabaseDescriptor.getEndpointSnitch();

        // Register an EndpointSnitch which returns fixed values for test.
        DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch()
        {
            @Override
            public String getRack(InetAddressAndPort endpoint) { return RACK1; }

            @Override
            public String getDatacenter(InetAddressAndPort endpoint) { return "us-east-1"; }

            @Override
            public int compareEndpoints(InetAddressAndPort target, InetAddressAndPort a1, InetAddressAndPort a2) { return 0; }
        });

        execute("CREATE KEYSPACE Foo WITH replication = { 'class' : 'NetworkTopologyStrategy', 'us-east-1' : 1 };");

        // Restore the previous EndpointSnitch
        DatabaseDescriptor.setEndpointSnitch(snitch);

        // clean up
        execute("DROP KEYSPACE IF EXISTS Foo");
    }

