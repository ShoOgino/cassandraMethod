    public static Object deserializeValue(ByteBuffer value, Class<?> valueClass)
    {
        try
        {
            // because jackson serialized ByteBuffer as byte[] and needs help with deserialization later
            if (valueClass.equals(ByteBuffer.class))
            {
                byte[] bvalue = (byte[]) deserializeValue(value, byte[].class);
                return bvalue == null ? null : ByteBuffer.wrap(bvalue);
            }

            return jsonMapper.readValue(ByteBufferUtil.getArray(value), valueClass);
        }
        catch (Exception e)
        {
            throw new RuntimeException(e);
        }
    }

