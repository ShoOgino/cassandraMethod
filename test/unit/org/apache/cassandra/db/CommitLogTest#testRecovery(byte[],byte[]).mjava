    protected void testRecovery(byte[] headerData, byte[] logData) throws Exception
    {
        Pair<File, File> tmpFiles = tmpFiles();
        File logFile = tmpFiles.right;
        File headerFile = tmpFiles.left;
        OutputStream lout = new FileOutputStream(logFile);
        OutputStream hout = new FileOutputStream(headerFile);
        lout.write(logData);
        hout.write(headerData);
        //statics make it annoying to test things correctly
        CommitLog.recover(new File[] {logFile}); //CASSANDRA-1119 / CASSANDRA-1179 throw on failure*/
    }

