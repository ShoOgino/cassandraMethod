        public long serializedSize(PartitionUpdate update, int version, TypeSizes sizes)
        {
            if (version < MessagingService.VERSION_30)
            {
                // TODO
                throw new UnsupportedOperationException("Version is " + version);
                //if (cf == null)
                //{
                //    return typeSizes.sizeof(false);
                //}
                //else
                //{
                //    return typeSizes.sizeof(true)  /* nullness bool */
                //        + cfIdSerializedSize(cf.id(), typeSizes, version)  /* id */
                //        + contentSerializedSize(cf, typeSizes, version);
                //}
            }

            try (UnfilteredRowIterator iter = update.sliceableUnfilteredIterator())
            {
                return UnfilteredRowIteratorSerializer.serializer.serializedSize(iter, version, update.rows, sizes);
            }
        }

