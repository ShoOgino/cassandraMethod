    protected int getBufferSize(int size)
    {
        return (int)Math.min(fileLength, size);
    }

