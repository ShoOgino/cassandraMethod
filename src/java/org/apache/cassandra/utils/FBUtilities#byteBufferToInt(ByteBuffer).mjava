    /**
     * Convert a byte buffer to an integer.
     * Does not change the byte buffer position.
     *
     * @param bytes byte buffer to convert to integer
     * @return int representation of the byte buffer
     */
    public static int byteBufferToInt(ByteBuffer bytes)
    {
        if (bytes.remaining() < 4)
        {
            throw new IllegalArgumentException("An integer must be 4 bytes in size.");
        }
        int n = 0;
        for (int i = 0; i < 4; ++i)
        {
            n <<= 8;
            n |= bytes.get(bytes.position() + i) & 0xFF;
        }
        return n;
    }

