    @Override
    public void close()
    {
        closed = true;
        logger.debug("{} Closing stream connection channels on {}", createLogTag(session, null), connectionId);
        channelKeepAlives.stream().map(scheduledFuture -> scheduledFuture.cancel(false));
        channelKeepAlives.clear();

        threadLocalChannel.values().stream().map(channel -> channel.close());
        threadLocalChannel.clear();
        fileTransferExecutor.shutdownNow();

        if (controlMessageChannel != null)
            controlMessageChannel.close();
    }

