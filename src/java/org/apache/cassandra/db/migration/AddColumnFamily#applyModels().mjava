    public void applyModels() throws IOException
    {
        // reinitialize the table.
        KSMetaData ksm = schema.getTableDefinition(cfm.ksName);
        ksm = makeNewKeyspaceDefinition(ksm);
        try
        {
            schema.load(cfm);
        }
        catch (ConfigurationException ex)
        {
            throw new IOException(ex);
        }
        Table.open(cfm.ksName, schema); // make sure it's init-ed w/ the old definitions first, since we're going to call initCf on the new one manually
        schema.setTableDefinition(ksm, newVersion);
        // these definitions could have come from somewhere else.
        schema.fixCFMaxId();
        if (!StorageService.instance.isClientMode())
            Table.open(ksm.name, schema).initCf(cfm.cfId, cfm.cfName);
    }

