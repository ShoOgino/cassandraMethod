    public void serialize(Header t, DataOutput dos, int version) throws IOException
    {
        CompactEndpointSerializationHelper.serialize(t.getFrom(), dos);
        dos.writeInt(t.getVerb().ordinal());
        dos.writeInt(t.details.size());
        for (String key : t.details.keySet())
        {
            dos.writeUTF(key);
            byte[] value = t.details.get(key);
            dos.writeInt(value.length);
            dos.write(value);
        }
    }

