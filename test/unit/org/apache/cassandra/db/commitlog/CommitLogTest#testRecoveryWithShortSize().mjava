    @Test
    public void testRecoveryWithShortSize() throws Exception
    {
        runExpecting(new WrappedRunnable()  {
            public void runMayThrow() throws Exception {
                byte[] data = new byte[5];
                data[3] = 1; // Not a legacy marker, give it a fake (short) size
                testRecovery(data, CommitLogDescriptor.VERSION_20);
            }
        }, CommitLogReplayException.class);
    }

