    /**
     * Synchronize file contents with disk.
     * @throws java.io.IOException on any I/O error.
     */
    public void sync() throws IOException
    {
        if (syncNeeded)
        {
            flush();
            out.getFD().sync();

            syncNeeded = false;
        }
    }

