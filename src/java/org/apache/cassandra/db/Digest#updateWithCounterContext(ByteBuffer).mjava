    /**
     * Update the digest with the content of a counter context.
     * Note that this skips the header entirely since the header information
     * has local meaning only, while digests are meant for comparison across
     * nodes. This means in particular that we always have:
     *  updateDigest(ctx) == updateDigest(clearAllLocal(ctx))
     */
    public Digest updateWithCounterContext(ByteBuffer context)
    {
        // context can be empty due to the optimization from CASSANDRA-10657
        if (!context.hasRemaining())
            return this;

        int pos = context.position() + CounterContext.headerLength(context);
        int len = context.limit() - pos;
        update(context, pos, len);
        return this;
    }

