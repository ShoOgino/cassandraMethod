    /**
     * @param bytes A byte array containing a serialized integer.
     * @param offset Start position of the integer in the array.
     * @return The integer value contained in the byte array.
     */
    public static int byteArrayToInt(byte[] bytes, int offset)
    {
        if (bytes.length - offset < 4)
        {
            throw new IllegalArgumentException("An integer must be 4 bytes in size.");
        }
        int n = 0;
        for ( int i = 0; i < 4; ++i )
        {
            n <<= 8;
            n |= bytes[offset + i] & 0xFF;
        }
        return n;
    }

