    @Test
    public void testMoveBackwardCalculateRangesToStreamWithPreferredEndpoints() throws Exception
    {
        RangesByEndpoint.Mutable expectedResult = new RangesByEndpoint.Mutable();
        expectedResult.put(cAddress, fullReplica(cAddress, twoToken, threeToken));
        expectedResult.put(dAddress, transientReplica(dAddress, twoToken, threeToken));

        invokeCalculateRangesToStreamWithPreferredEndpoints(calculateStreamAndFetchRangesMoveBackward().left,
                                                            constructTMDsMoveBackward(),
                                                            expectedResult.asImmutableView());
    }

