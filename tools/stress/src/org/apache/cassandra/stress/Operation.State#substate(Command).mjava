        public State substate(Command command)
        {
            assert type == Command.MIXED;
            State substate = substates.get(command);
            if (substate == null)
            {
                substates.put(command, substate = new State(command, this));
            }
            return substate;
        }

