    public int skipBytes(int n) throws IOException
    {
        if (n <= 0)
            return 0;
        long oldPosition = getPosition();
        seek(Math.min(getPositionLimit(), oldPosition + n));
        long skipped = getPosition() - oldPosition;
        assert skipped >= 0 && skipped <= n;
        return (int) skipped;
    }

