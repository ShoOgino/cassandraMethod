    public void testLog(ParameterizedClass compression, EncryptionContext encryptionContext) throws IOException, InterruptedException
    {
        DatabaseDescriptor.setCommitLogCompression(compression);
        DatabaseDescriptor.setEncryptionContext(encryptionContext);
        for (CommitLogSync sync : CommitLogSync.values())
        {
            DatabaseDescriptor.setCommitLogSync(sync);
            CommitLog commitLog = new CommitLog(location, CommitLogArchiver.disabled()).start();
            testLog(commitLog);
            assert !failed;
        }
    }

