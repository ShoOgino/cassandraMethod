    @Test
    public void testColumnNameEqualToKeyAlias()
    {
        CFMetaData metaData = Schema.instance.getCFMetaData("Keyspace1", "Standard1");
        CfDef newMetadata = CFMetaData.convertToThrift(metaData);

        boolean gotException = false;

        // add a key_alias = "id"
        newMetadata.setKey_alias(AsciiType.instance.decompose("id"));

        // should not throw IRE here
        try
        {
            ThriftValidation.validateCfDef(newMetadata, metaData);
        }
        catch (InvalidRequestException e)
        {
            gotException = true;
        }

        assert !gotException : "got unexpected InvalidRequestException";

        // add a column with name = "id"
        newMetadata.addToColumn_metadata(new ColumnDef(UTF8Type.instance.decompose("id"),
                                                       "org.apache.cassandra.db.marshal.UTF8Type"));


        gotException = false;

        try
        {
            ThriftValidation.validateCfDef(newMetadata, metaData);
        }
        catch (InvalidRequestException e)
        {
            gotException = true;
        }

        assert gotException : "expected InvalidRequestException but not received.";
    }

