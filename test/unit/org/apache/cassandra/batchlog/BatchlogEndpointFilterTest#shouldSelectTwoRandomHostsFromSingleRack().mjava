    @Test
    public void shouldSelectTwoRandomHostsFromSingleRack() throws UnknownHostException
    {
        Multimap<String, InetAddress> endpoints = ImmutableMultimap.<String, InetAddress> builder()
                .put(LOCAL, InetAddress.getByName("1"))
                .put(LOCAL, InetAddress.getByName("11"))
                .put(LOCAL, InetAddress.getByName("111"))
                .put(LOCAL, InetAddress.getByName("1111"))
                .build();
        Collection<InetAddress> result = new TestEndpointFilter(LOCAL, endpoints).filter();
        // result should be the last two non-local replicas
        // (Collections.shuffle has been replaced with Collections.reverse for testing)
        assertThat(result.size(), is(2));
        assertThat(result, JUnitMatchers.hasItem(InetAddress.getByName("111")));
        assertThat(result, JUnitMatchers.hasItem(InetAddress.getByName("1111")));
    }

