    /**
     * Return the Token to Endpoint map for all the node in the cluster, including bootstrapping ones.
     */
    public Map<Token, InetAddress> getTokenToEndpointMap()
    {
        lock.readLock().lock();
        try
        {
            Map<Token, InetAddress> map = new HashMap<Token, InetAddress>(tokenToEndpointMap.size() + bootstrapTokens.size());
            map.putAll(tokenToEndpointMap);
            synchronized (bootstrapTokens)
            {
                map.putAll(bootstrapTokens);
            }
            return map;
        }
        finally
        {
            lock.readLock().unlock();
        }
    }

