    @Test
    public void testReadBytes() throws IOException
    {
        final BufferedRandomAccessFile file = createTempFile("brafReadBytes");

        byte[] data = new byte[BufferedRandomAccessFile.DEFAULT_BUFFER_SIZE + 10];

        for (int i = 0; i < data.length; i++)
        {
            data[i] = 'c';
        }

        file.write(data);

        file.seek(0);
        ByteBuffer content = file.readBytes((int) file.length());

        // after reading whole file we should be at EOF
        assertEquals(ByteBufferUtil.compare(content, data), 0);
        assert file.bytesRemaining() == 0 && file.isEOF();

        file.seek(0);
        content = file.readBytes(10); // reading first 10 bytes
        assertEquals(ByteBufferUtil.compare(content, "cccccccccc".getBytes()), 0);
        assertEquals(file.bytesRemaining(), file.length() - content.limit());

        // trying to read more than file has right now
        expectEOF(new Callable<Object>()
        {
            public Object call() throws IOException
            {
                return file.readBytes((int) file.length() + 10);
            }
        });

        file.close();
    }

