        @Override
        public boolean test(Message<?> messageOut, InetAddressAndPort to)
        {
            try (DataOutputBuffer out = new DataOutputBuffer(1024))
            {
                InetAddressAndPort from = broadcastAddressAndPort();
                Tracing.instance.traceOutgoingMessage(messageOut, to);
                Message.serializer.serialize(messageOut, out, MessagingService.current_version);
                deliver.accept(to, new MessageImpl(messageOut.verb().id, out.toByteArray(), messageOut.id(), MessagingService.current_version, from));
            }
            catch (IOException e)
            {
                throw new RuntimeException(e);
            }
            return false;
        }

