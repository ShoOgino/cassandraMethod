    // -1 indicates consumer should terminate
    int takePermits(int count);

