        public void serialize(VersionedValue value, DataOutput dos, int version) throws IOException
        {
            String outValue = value.value;

            if (version < MessagingService.VERSION_12)
            {
                String[] pieces = value.value.split(DELIMITER_STR, -1);
                if ((pieces[0] == STATUS_NORMAL) || pieces[0] == STATUS_BOOTSTRAPPING)
                {
                    assert pieces.length >= 3;
                    outValue = versionString(pieces[0], pieces[2]);
                }
            }

            dos.writeUTF(outValue);
            dos.writeInt(value.version);
        }

