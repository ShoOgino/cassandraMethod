        public SegmentedFile complete(ChannelProxy channel, long overrideLength, boolean isFinal)
        {
            assert !isFinal || overrideLength <= 0;
            long length = overrideLength > 0 ? overrideLength : channel.size();
            // create the segments
            return new MmappedSegmentedFile(channel, length, createSegments(channel, length));
        }

