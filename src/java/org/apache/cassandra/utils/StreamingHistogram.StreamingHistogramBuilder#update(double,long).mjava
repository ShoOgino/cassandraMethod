        /**
         * Adds new point p with value m to this histogram.
         * @param p
         * @param m
         */
        public void update(double p, long m)
        {
            double d = p % this.roundSeconds;
            if (d > 0)
                p = p + (this.roundSeconds - d);

            Long mi = spool.get(p);
            if (mi != null)
            {
                // we found the same p so increment that counter
                spool.put(p, mi + m);
            }
            else
            {
                spool.put(p, m);
            }
            if(spool.size() > maxSpoolSize)
                flushHistogram();
        }

