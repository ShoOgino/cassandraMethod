    private UUID newSession(Connection connection, UUID sessionId, TraceType traceType, boolean withFinishEvent)
    {
        assert state.get() == null;

        TraceState ts = new TraceState(localAddress, connection, sessionId, traceType, withFinishEvent);
        state.set(ts);
        sessions.put(sessionId, ts);

        return sessionId;
    }

