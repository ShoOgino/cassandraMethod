	/**
	 * Helper which actually writes the metric in XDR format.
	 *
	 * @param name
	 * @param type
	 * @param value
	 * @throws IOException
	 */
	private void emitMetric(String name, String type, String value) throws IOException
	{
		String units = getUnits(name);
		int slope = getSlope(name);
		int tmax = getTmax(name);
		int dmax = getDmax(name);
		offset_ = 0;

		xdr_int(0); // metric_user_defined
		xdr_string(type);
		xdr_string(name);
		xdr_string(value);
		xdr_string(units);
		xdr_int(slope);
		xdr_int(tmax);
		xdr_int(dmax);

		for (InetSocketAddress socketAddress : metricsServers_)
		{
			DatagramPacket packet = new DatagramPacket(buffer_, offset_, socketAddress);
			datagramSocket_.send(packet);
		}
	}

