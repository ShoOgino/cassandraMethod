    protected void writeHeader(ByteBuffer buffer) throws IOException
    {
        channel.write(buffer);
        assert buffer.remaining() == 0;
    }

