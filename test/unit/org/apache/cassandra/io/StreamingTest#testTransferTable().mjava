    @Test
    public void testTransferTable() throws Exception
    {
        StorageService.instance.initServer();

        // write a temporary SSTable, but don't register it
        Set<String> content = new HashSet<String>();
        content.add("key");
        SSTableReader sstable = SSTableUtils.writeSSTable(content);
        String tablename = sstable.getTableName();
        String cfname = sstable.getColumnFamilyName();

        // transfer
        StreamOut.transferSSTables(LOCAL, Arrays.asList(sstable), tablename);

        // confirm that the SSTable was transferred and registered
        ColumnFamilyStore cfstore = Table.open(tablename).getColumnFamilyStore(cfname);
        RangeSliceReply rr = Util.getRangeSlice(cfstore);
        assert rr.rows.size() == 1;
        assert rr.rows.get(0).key.equals("key");
    }

