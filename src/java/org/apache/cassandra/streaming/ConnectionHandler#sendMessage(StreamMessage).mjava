    public void sendMessage(StreamMessage message)
    {
        if (outgoing.isClosed())
            throw new RuntimeException("Outgoing stream handler has been closed");

        if (message.type == StreamMessage.Type.FILE && isPreview)
            throw new RuntimeException("Cannot send file messages for preview streaming sessions");

        outgoing.enqueue(message);
    }

