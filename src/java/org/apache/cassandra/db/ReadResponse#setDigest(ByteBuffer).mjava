    public void setDigest(ByteBuffer digest)
    {
        ByteBuffer curr = this.digest;
        if (!digestUpdater.compareAndSet(this, curr, digest))
        {
            assert digest.equals(this.digest) :
                String.format("Digest mismatch : %s vs %s", digest.array(), this.digest.array());
        }
    }

