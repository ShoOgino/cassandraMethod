    @Test
    public void testTableWithCollection() throws Throwable
    {
        createTable("CREATE TABLE %s (k text PRIMARY KEY, m map<text, text>)");

        String key = "someKey";

        execute("INSERT INTO %s(k, m) VALUES (?, { 'foo' : 'value1', 'bar' : 'value2' }) USING TIMESTAMP ?", key, 1L);

        // ColumnFamily(table_2 -{deletedAt=-9223372036854775808, localDeletion=2147483647, ranges=[m:_-m:!, deletedAt=0, localDeletion=1441012271]}- [:false:0@1,m:626172:false:6@1,m:666f6f:false:6@1,])
        assertDigest("708f3fc8bc8149cc3513eef300bf0182", readAndDigest(key));

        // This is a collection range tombstone
        execute("DELETE m FROM %s USING TIMESTAMP ? WHERE k = ?", 2L, key);

        // ColumnFamily(table_2 -{deletedAt=-9223372036854775808, localDeletion=2147483647, ranges=[m:_-m:!, deletedAt=2, localDeletion=1441012271]}- [:false:0@1,])
        assertDigest("f39937fc3ed96956ef507e81717fa5cd", readAndDigest(key));
    }

