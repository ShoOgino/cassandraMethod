    /**
     * Add new relocating ranges (tokens moving from their respective endpoints, to another).
     * @param tokens tokens being moved
     * @param endpoint destination of moves
     */
    public void addRelocatingTokens(Collection<Token> tokens, InetAddress endpoint)
    {
        assert endpoint != null;
        assert tokens != null && tokens.size() > 0;

        lock.writeLock().lock();

        try
        {
            for (Token token : tokens)
            {
                InetAddress prev = relocatingTokens.put(token, endpoint);
                if (prev != null && !prev.equals(endpoint))
                    logger.warn("Relocation of {} to {} overwrites previous to {}", new Object[]{token, endpoint, prev});
            }
        }
        finally
        {
            lock.writeLock().unlock();
        }
    }

