        public void waitForAgreement()
        {
            schemaHasChanged = true;
            signal();
            try
            {
                agreement.await(1L, TimeUnit.MINUTES);
            } catch (InterruptedException e)
            {
                throw new IllegalStateException("Schema agreement not reached");
            }
        }

