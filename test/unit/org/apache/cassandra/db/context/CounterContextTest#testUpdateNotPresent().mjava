    @Test
    public void testUpdateNotPresent()
    {
        byte[] context = new byte[stepLength * 2];

        for (int i = 0; i < 2; i++)
        {
            cc.writeElementAtStepOffset(
                context,
                i,
                FBUtilities.toByteArray(i),
                1L,
                1L);
        }

        context = cc.update(context, idAddress, 328L);

        assert context.length == stepLength * 3;
        assert   1L == FBUtilities.byteArrayToLong(context, idLength);
        assert 328L == FBUtilities.byteArrayToLong(context, idLength + clockLength);
        for (int i = 1; i < 3; i++)
        {
            int offset = i * stepLength;
            assert i-1 == FBUtilities.byteArrayToInt(context,  offset);
            assert  1L == FBUtilities.byteArrayToLong(context, offset + idLength);
            assert  1L == FBUtilities.byteArrayToLong(context, offset + idLength + clockLength);
        }
    }

