    /**
     * Override this method instead of overriding flush()
     * @throws IOException on any I/O error.
     */
    protected void flushData() throws IOException
    {
        out.write(buffer, 0, validBufferBytes);
    }

