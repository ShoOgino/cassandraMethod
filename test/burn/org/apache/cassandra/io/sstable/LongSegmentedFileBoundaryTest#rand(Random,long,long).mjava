    private static long rand(Random random, long lowerBound, long upperBound)
    {
        if (upperBound == lowerBound)
            return upperBound;
        return lowerBound + ((random.nextLong() & Long.MAX_VALUE) % (upperBound - lowerBound));
    }

