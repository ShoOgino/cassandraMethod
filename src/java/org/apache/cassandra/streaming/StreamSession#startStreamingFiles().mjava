    private void startStreamingFiles()
    {
        streamResult.handleSessionPrepared(this);

        state(State.STREAMING);
        for (StreamTransferTask task : transfers.values())
        {
            if (task.getFileMessages().size() > 0)
                handler.sendMessages(task.getFileMessages());
            else
                taskCompleted(task); // there is no file to send
        }
    }

