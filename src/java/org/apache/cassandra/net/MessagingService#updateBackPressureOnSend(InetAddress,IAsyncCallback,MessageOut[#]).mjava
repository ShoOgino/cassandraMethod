    /**
     * Updates the back-pressure state on sending to the given host if enabled and the given message callback supports it.
     *
     * @param host The replica host the back-pressure state refers to.
     * @param callback The message callback.
     * @param message The actual message.
     */
    public void updateBackPressureOnSend(InetAddress host, IAsyncCallback callback, MessageOut<?> message)
    {
        if (DatabaseDescriptor.backPressureEnabled() && callback.supportsBackPressure())
        {
            OutboundTcpConnectionPool cp = getConnectionPool(host);
            if (cp != null)
            {
                BackPressureState backPressureState = cp.getBackPressureState();
                backPressureState.onMessageSent(message);
            }
        }
    }

