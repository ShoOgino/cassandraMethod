    public static void validateKey(ByteBuffer key) throws InvalidRequestException
    {
        if (key == null || key.remaining() == 0)
            throw newInvalidRequestException("Key may not be empty");
        
        // check that key can be handled by FBUtilities.writeShortByteArray
        if (key.remaining() > FBUtilities.MAX_UNSIGNED_SHORT)
            throw newInvalidRequestException("Key length of " + key.remaining() +
                    " is longer than maximum of " + FBUtilities.MAX_UNSIGNED_SHORT);
    }

