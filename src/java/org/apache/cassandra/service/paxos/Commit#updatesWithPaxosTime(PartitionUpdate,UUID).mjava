    private static PartitionUpdate updatesWithPaxosTime(PartitionUpdate update, UUID ballot)
    {
        long t = UUIDGen.microsTimestamp(ballot);
        // Using t-1 for tombstones so deletion doesn't trump newly inserted data (#6069)
        PartitionUpdate newUpdate = new PartitionUpdate(update.metadata(),
                                                        update.partitionKey(),
                                                        update.deletionInfo().updateAllTimestamp(t-1),
                                                        update.columns(),
                                                        update.rowCount());

        if (!update.staticRow().isEmpty())
            copyWithUpdatedTimestamp(update.staticRow(), newUpdate.staticWriter(), t);

        for (Row row : update)
            copyWithUpdatedTimestamp(row, newUpdate.writer(), t);

        return newUpdate;
    }

