    private static void release(Iterable<? extends Ref<?>> refs)
    {
        Throwable fail = null;
        for (Ref ref : refs)
        {
            try
            {
                ref.release();
            }
            catch (Throwable t)
            {
                if (fail == null)
                    fail = t;
                else
                    fail.addSuppressed(t);
            }
        }
        if (fail != null)
            throw Throwables.propagate(fail);
    }

