    static CommitLogSegment createSegment(CommitLog commitLog, Runnable onClose)
    {
        return commitLog.configuration.useCompression() ? new CompressedSegment(commitLog, onClose)
                                                        : new MemoryMappedSegment(commitLog);
    }

