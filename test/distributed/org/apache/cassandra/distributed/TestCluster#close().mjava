    @Override
    public void close()
    {
        List<Future<?>> futures = instances.stream()
                .map(i -> i.isolatedExecutor.submit(i::shutdown))
                .collect(Collectors.toList());

        // Make sure to only delete directory when threads are stopped
        FBUtilities.waitOnFutures(futures, 60, TimeUnit.SECONDS);
        FileUtils.deleteRecursive(root);

        //withThreadLeakCheck(futures);
        System.gc();
    }

