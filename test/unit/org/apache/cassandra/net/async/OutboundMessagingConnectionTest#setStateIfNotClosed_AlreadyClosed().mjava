    @Test
    public void setStateIfNotClosed_AlreadyClosed()
    {
        AtomicReference<State> state = new AtomicReference<>(CLOSED);
        OutboundMessagingConnection.setStateIfNotClosed(state, NOT_READY);
        Assert.assertEquals(CLOSED, state.get());
    }

