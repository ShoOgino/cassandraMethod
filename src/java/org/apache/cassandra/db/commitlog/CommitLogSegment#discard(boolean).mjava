    /**
     * Completely discards a segment file by deleting it. (Potentially blocking operation)
     */
    void discard(boolean deleteFile)
    {
        close();
        if (deleteFile)
            FileUtils.deleteWithConfirm(logFile);
        commitLog.allocator.addSize(-onDiskSize());
    }

