    @Test
    public void testRecoveryWithCollectionClusteringKeysStatic() throws Exception
    {
        Mutation rm = new Mutation(KEYSPACE1, bytes(0));

        CFMetaData cfm = Schema.instance.getCFMetaData(KEYSPACE1,CF3);

        int clusterSize = cfm.comparator.clusteringPrefixSize();
        ByteBuffer[] elements = new ByteBuffer[clusterSize];
        for (int i = 0; i < clusterSize; i++)
            elements[i] = ByteBufferUtil.EMPTY_BYTE_BUFFER;

        rm.add(CF3, CellNames.compositeSparse(elements, new ColumnIdentifier("s", true), true), bytes(1), 0);

        CommitLog.instance.add(rm);
        int replayed = 0;

        try
        {
            System.setProperty(CommitLogReplayer.IGNORE_REPLAY_ERRORS_PROPERTY, "true");
            replayed = CommitLog.instance.resetUnsafe(false);
        }
        finally
        {
            System.clearProperty(CommitLogReplayer.IGNORE_REPLAY_ERRORS_PROPERTY);
        }

        Assert.assertEquals(replayed, 1);

    }

