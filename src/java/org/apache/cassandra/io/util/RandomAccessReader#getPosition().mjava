    public long getPosition()
    {
        return bufferOffset + (buffer == null ? 0 : buffer.position());
    }

