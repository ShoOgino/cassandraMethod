    @Test
    public void testUnsignedRead() throws Exception
    {
        byte[] testData;

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        DataOutputStream dos = new DataOutputStream(baos);
        try
        {
            // byte
            dos.writeByte(0x1);
            // short
            dos.writeShort(1);
            testData = baos.toByteArray();
        }
        finally
        {
            dos.close();
        }

        DataInputStream dis = new DataInputStream(new ByteArrayInputStream(testData));
        BytesReadTracker tracker = new BytesReadTracker(dis);

        try
        {
            // byte = 1byte
            int b = tracker.readUnsignedByte();
            assertEquals(b, 1);
            assertEquals(1, tracker.getBytesRead());
            // short = 2bytes
            int s = tracker.readUnsignedShort();
            assertEquals(1, s);
            assertEquals(3, tracker.getBytesRead());

            assertEquals(testData.length, tracker.getBytesRead());
        }
        finally
        {
            dis.close();
        }
    }

