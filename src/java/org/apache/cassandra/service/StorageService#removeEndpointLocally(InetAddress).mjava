    /**
     * endpoint was completely removed from ring (as a result of removetoken command). Remove it
     * from token metadata and gossip and restore replica count.
     */
    private void removeEndpointLocally(InetAddress endpoint)
    {
        restoreReplicaCount(endpoint);
        Gossiper.instance.removeEndpoint(endpoint);
        tokenMetadata_.removeEndpoint(endpoint);
    }

