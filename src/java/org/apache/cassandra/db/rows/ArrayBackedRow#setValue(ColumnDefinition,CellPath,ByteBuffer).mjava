    // This is only used by PartitionUpdate.CounterMark but other uses should be avoided as much as possible as it breaks our general
    // assumption that Row objects are immutable. This method should go away post-#6506 in particular.
    // This method is in particular not exposed by the Row API on purpose.
    // This method also *assumes* that the cell we're setting already exists.
    public void setValue(ColumnDefinition column, CellPath path, ByteBuffer value)
    {
        int idx = binarySearch(column);
        assert idx >= 0;
        if (column.isSimple())
            data[idx] = ((Cell)data[idx]).withUpdatedValue(value);
        else
            ((ComplexColumnData)data[idx]).setValue(path, value);
    }

