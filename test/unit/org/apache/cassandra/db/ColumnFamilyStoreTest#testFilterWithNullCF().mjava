    @Test
    public void testFilterWithNullCF() throws Exception
    {
        Keyspace keyspace = Keyspace.open(KEYSPACE1);
        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(CF_STANDARD1);
        final Row row = new Row(Util.dk("key1"), null);

        ColumnFamilyStore.AbstractScanIterator iterator = new ColumnFamilyStore.AbstractScanIterator()
        {
            Iterator<Row> it = Collections.singletonList(row).iterator();

            protected Row computeNext()
            {
                return it.hasNext() ? it.next() : endOfData();
            }

            @Override
            public void close()
            {
            }
        };

        ExtendedFilter filter = ExtendedFilter.create(
                cfs,
                DataRange.allData(DatabaseDescriptor.getPartitioner()), null, 1, true, System.currentTimeMillis());

        List<Row> list = cfs.filter(iterator, filter);
        assert 1 == list.size();
        assert list.get(0).key == row.key;
        assert null == list.get(0).cf;
    }

