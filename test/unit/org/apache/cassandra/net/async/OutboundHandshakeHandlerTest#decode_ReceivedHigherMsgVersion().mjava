    @Test
    public void decode_ReceivedHigherMsgVersion()
    {
        int msgVersion = MESSAGING_VERSION - 1;
        channel.pipeline().remove(HANDLER_NAME);
        params = OutboundConnectionParams.builder()
                                         .connectionId(connectionId)
                                         .callback(handshakeResult -> callbackHandler.receive(handshakeResult))
                                         .mode(NettyFactory.Mode.MESSAGING)
                                         .protocolVersion(msgVersion)
                                         .coalescingStrategy(Optional.empty())
                                         .build();
        handler = new OutboundHandshakeHandler(params);
        channel.pipeline().addFirst(HANDLER_NAME, handler);
        buf = new SecondHandshakeMessage(MESSAGING_VERSION).encode(PooledByteBufAllocator.DEFAULT);
        channel.writeInbound(buf);

        Assert.assertEquals(MESSAGING_VERSION, callbackHandler.result.negotiatedMessagingVersion);
        Assert.assertEquals(HandshakeResult.Outcome.DISCONNECT, callbackHandler.result.outcome);
    }

