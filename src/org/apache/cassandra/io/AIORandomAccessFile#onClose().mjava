    /**
     * Invoked when close() is invoked and causes the flush
     * of the last few bytes to block when the write is submitted.
     * @throws IOException
     */
    private void onClose() throws IOException
    {
        if (this.dirty_)
        {
            int len = (int) (this.curr_ - this.lo_);            
            doWrite(this.lo_, true);
            this.diskPos_ = this.curr_;
            this.dirty_ = false;
        }  
    }

