    static MessageIn<?> deserializePre40(DataInputPlus in, int id, int version, InetAddressAndPort from) throws IOException
    {
        assert from.equals(CompactEndpointSerializationHelper.instance.deserialize(in, version));
        MessagingService.Verb verb = MessagingService.Verb.fromId(in.readInt());

        Map<ParameterType, Object> parameters = Collections.emptyMap();
        int parameterCount = in.readInt();
        if (parameterCount != 0)
        {
            parameters = new EnumMap<>(ParameterType.class);
            readParameters(in, version, parameterCount, parameters);
        }

        Object payload = null;
        int payloadSize = in.readInt();
        if (payloadSize > 0)
        {
            IVersionedSerializer serializer = MessagingService.getVerbSerializer(verb, id);
            if (serializer == null) in.skipBytesFully(payloadSize);
            else payload = serializer.deserialize(in, version);
        }

        return new MessageIn<>(from, payload, parameters, verb, version, System.nanoTime());
    }

