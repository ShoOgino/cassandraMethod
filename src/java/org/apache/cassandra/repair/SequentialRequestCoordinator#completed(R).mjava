    @Override
    public int completed(R request)
    {
        assert request.equals(requests.peek());
        requests.poll();
        int remaining = requests.size();
        if (remaining != 0)
            processor.process(requests.peek());
        return remaining;
    }

